{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport iziToast from 'izitoast';\n\nconst STORAGE_KEY = 'feedback-form-state';\nconst form = document.querySelector('.feedback-form');\nconst { email, message } = form.elements;\n\nform.addEventListener('input', throttle(handleInput, 500));\nform.addEventListener('submit', handleSubmit);\n\nlet formData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\nreloadPage();\n\nfunction reloadPage() {\n  email.value = formData.email || '';\n  message.value = formData.message || '';\n}\n\nfunction handleInput() {\n  formData = { email: email.value, message: message.value };\n  saveToLocalStorage();\n}\n\nfunction handleSubmit(evt) {\n  evt.preventDefault();\n\n  if (email.value === '' || message.value === '') {\n    return iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Please fill in all required fields.',\n    });\n  }\n\n  console.log({ email: email.value, message: message.value });\n  clearLocalStorage();\n  evt.currentTarget.reset();\n  formData = {};\n}\n\nfunction saveToLocalStorage() {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction clearLocalStorage() {\n  localStorage.removeItem(STORAGE_KEY);\n}\n"],"names":["STORAGE_KEY","form","email","message","throttle","handleInput","handleSubmit","formData","reloadPage","saveToLocalStorage","evt","iziToast","clearLocalStorage"],"mappings":"+IAGA,MAAMA,EAAc,sBACdC,EAAO,SAAS,cAAc,gBAAgB,EAC9C,CAAE,MAAAC,EAAO,QAAAC,GAAYF,EAAK,SAEhCA,EAAK,iBAAiB,QAASG,EAASC,EAAa,GAAG,CAAC,EACzDJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,IAAIC,EAAW,KAAK,MAAM,aAAa,QAAQP,CAAW,CAAC,GAAK,GAChEQ,IAEA,SAASA,GAAa,CACpBN,EAAM,MAAQK,EAAS,OAAS,GAChCJ,EAAQ,MAAQI,EAAS,SAAW,EACtC,CAEA,SAASF,GAAc,CACrBE,EAAW,CAAE,MAAOL,EAAM,MAAO,QAASC,EAAQ,OAClDM,GACF,CAEA,SAASH,EAAaI,EAAK,CAGzB,GAFAA,EAAI,eAAc,EAEdR,EAAM,QAAU,IAAMC,EAAQ,QAAU,GAC1C,OAAOQ,EAAS,MAAM,CACpB,MAAO,QACP,SAAU,WACV,QAAS,qCACf,CAAK,EAGH,QAAQ,IAAI,CAAE,MAAOT,EAAM,MAAO,QAASC,EAAQ,KAAK,CAAE,EAC1DS,IACAF,EAAI,cAAc,QAClBH,EAAW,CAAA,CACb,CAEA,SAASE,GAAqB,CAC5B,aAAa,QAAQT,EAAa,KAAK,UAAUO,CAAQ,CAAC,CAC5D,CAEA,SAASK,GAAoB,CAC3B,aAAa,WAAWZ,CAAW,CACrC"}